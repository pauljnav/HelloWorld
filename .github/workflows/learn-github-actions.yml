name: github-action-PowerShell
run-name: ${{ github.actor }} is using GitHub Actions for PowerShell Measure-Command tests on ubuntu and windows
on: [push]
jobs:
  # job name
  Explore-System-Environment:
    strategy:
      matrix:
        os:
          - ubuntu-latest
          - windows-latest
    runs-on: ${{ matrix.os }}
    steps:
      # Step 1: Run Continuous Integration
      - uses: actions/checkout@v4
      - name: Run Continuous Integration
        shell: pwsh
        run: |
          Write-Host "Hello from PowerShell on ${{ matrix.os }}!"
          $host | select name,version
          $upperBound = 10000
          Measure-Command {
            $items = @()
            foreach ($i in 0..$upperBound) { $items += $i }
          } | Select-Object TotalMilliseconds
          Measure-Command {
            $items = foreach ($i in 0..$upperBound) { $i }
          } | Select-Object TotalMilliseconds
          Measure-Command {
            $items = [System.Collections.Generic.List[int]]::new()
            foreach ($i in 0..$upperBound) { $items.Add($i) }
          } | Select-Object TotalMilliseconds
        # job to always continue processing even if there are test failures
        if: ${{ always() }}
        #[System.Environment]::OSVersion.Platform
